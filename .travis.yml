language: c
sudo: false

os:
  - linux
  - osx

before_install:
  - test "$TRAVIS_OS_NAME" = "macos" && brew update
  - test "$TRAVIS_OS_NAME" = "macos" && brew install xz

script:
 - test "$TRAVIS_OS_NAME" = "linux" && cd squashfs-tools/ && make checkstyle
 - cd squashfs-tools/ && make LZMA_XZ_SUPPORT=1 XZ_SUPPORT=1 XATTR_SUPPORT=

addons:
  apt:
    packages:
      - astyle
      - liblzma5
      - liblzma-dev
